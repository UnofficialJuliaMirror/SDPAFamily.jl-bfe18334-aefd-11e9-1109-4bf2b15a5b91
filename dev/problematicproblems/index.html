<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Problematic problems &amp; troubleshooting · SDPAFamily.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>SDPAFamily.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li><a class="toctext" href="../installation/">Installation</a></li><li><a class="toctext" href="../usage/">Usage</a></li><li><a class="toctext" href="../examples/">Examples</a></li><li><a class="toctext" href="../benchmarks/">Benchmarks</a></li><li class="current"><a class="toctext" href>Problematic problems &amp; troubleshooting</a><ul class="internal"><li><a class="toctext" href="#Underflows-1">Underflows</a></li><li><a class="toctext" href="#Presolve-1">Presolve</a></li><li><a class="toctext" href="#Troubleshooting-1">Troubleshooting</a></li></ul></li><li><a class="toctext" href="../reference/">Developer reference</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Problematic problems &amp; troubleshooting</a></li></ul><a class="edit-page" href="https://github.com/ericphanson/SDPAFamily.jl/blob/master/docs/src/problematicproblems.md#L"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Problematic problems &amp; troubleshooting</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Problematic-Problems-1" href="#Problematic-Problems-1">Problematic Problems</a></h1><p>Unfortunately, we have not been able to successfully solve every problem that we have tried with one choice of parameters. We have chosen default parameter settings that we hope will work with a wide variety of problems.</p><p>We now demonstrate some common problems using <a href="https://github.com/ericphanson/Convex.jl/tree/MathOptInterface"><code>Convex.jl#MathOptInterface</code></a>.</p><h2><a class="nav-anchor" id="Underflows-1" href="#Underflows-1">Underflows</a></h2><p>This occurs when the precision used to represent the solution is not high enough compared to the internal precision used by the solver. This lack of precision can lead to catastrophic cancellation. For example, the following problem is taken from the <code>Convex.jl Problem Depot</code>, and is run with <code>TEST=true</code>, meaning the solution returned by the solver will be tested against the true solution. In the following, SDPA-QD is used to solve the problem, and <code>Float64</code> numbers are used to represent the obtained solution, and the test fails.</p><div></div><pre><code class="language-julia-repl">julia&gt; test_problem = Convex.ProblemDepot.PROBLEMS[&quot;affine&quot;][&quot;affine_Diagonal_atom&quot;];

julia&gt; TEST = true; atol = 1e-3; rtol = 0.0;

julia&gt; test_problem(Val(TEST), atol, rtol, Float64) do problem
           solve!(problem, SDPAFamily.Optimizer{Float64}(variant=:sdpa_qd, silent=true))
       end
┌ Warning: Potential underflow detected. Check the results and use `BigFloat` entries if necessary.
└ @ SDPAFamily ~/build/ericphanson/SDPAFamily.jl/src/file_io.jl:91
Test Failed at /home/travis/.julia/packages/Convex/r4w0m/src/problem_depot/problems/affine.jl:498
  Expression: all(abs.(evaluate(Diagonal(x)) - Diagonal([1, 2, 3, 4])) .&lt;= atol)
ERROR: There was an error during testing</code></pre><p>We try to automatically detect underflows and warn against them; in this case, the warning is issued.</p><h2><a class="nav-anchor" id="Presolve-1" href="#Presolve-1">Presolve</a></h2><p>The usefulness of our <code>presolve</code> routine is demonstrated in <a href="../usage/#Using-presolve-1">Using presolve</a>. However, our <code>presolve</code> subroutine does not utilize any tools more powerful than naïve Gaussian elimination and it has limitations. At its core, the <code>reduce!</code> method takes in a sparse matrix where each row is a linearized constraint matrix and apply Gaussian elimination with pivoting to identify the linear independence. This process is not numerically stable as the rounding errors accumulate as we progress. Therefore, we cannot guarantee that all linear dependent entries will be identified. </p><p>This is demonstrated in the following example. For a <span>$1500 \times 100$</span> matrix (Here we use one more column because <code>reduce!</code> ignores the last column as it represents the constraint constants. They go along for the ride here to help us identify <em>inconsistent</em> constraints.), we expect <span>$1400$</span> or more linearly dependent rows. However, due to its numerical instability, we can only identify a subset of them. </p><pre><code class="language-julia-repl">julia&gt; A = sprandn(1500, 101, 0.1);

julia&gt; redundant_F = collect(setdiff!(Set(1:150), Set(rowvals(SDPAFamily.reduce!(A)[:, 1:end-1]))));

julia&gt; length(redundant_F)
143</code></pre><h2><a class="nav-anchor" id="Troubleshooting-1" href="#Troubleshooting-1">Troubleshooting</a></h2><p>Try:</p><ol><li>Set <code>silent=false</code> and look for warnings and error messages</li><li>Set <code>presolve=true</code> to remove redundant constraints</li><li>Use <code>BigFloat</code> (the default) or <code>Double64</code> (from the <a href="https://github.com/JuliaMath/DoubleFloats.jl">DoubleFloats</a> package) precision instead of <code>Float64</code> (e.g. <code>SDPAFamily.Optimizer{Double64}(...)</code>)</li><li>Change the parameters by passing a custom parameter file (i.e. <code>SDPAFamily(params_path=...)</code>).</li></ol><footer><hr/><a class="previous" href="../benchmarks/"><span class="direction">Previous</span><span class="title">Benchmarks</span></a><a class="next" href="../reference/"><span class="direction">Next</span><span class="title">Developer reference</span></a></footer></article></body></html>
